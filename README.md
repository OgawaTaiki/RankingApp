# アプリ概要
TwitterAPIを使用して各週で放送されるドラマやアニメのランキングサイトを作成しました。  
各作品の公式Twitterアカウントが呟いたツイートの平均いいね数と平均リツイート数から、  
本アプリ独自の評価数値を割り出し、ランキングを作成しました。  
ツイート情報を定期的に取得することで、毎週の放送がどのような反響の変化があったのかをその作品のポイント推移をみながら確認できます。  
また、作品の情報はスクレイピングによって自動取得したものを少し調整する形で集めています。


## 各コンテンツ（アニメやドラマ）のポイント（独自の評価数値）について
本アプリにおいて、POINTとして表記されている数値は、以下の計算式に基づき、独自の評価数値として算出されたものです。

`POINT ＝ （ 平均いいね数 ＋ リツイート数 ✖️ ２ ） ➗ １００`

作品のPOINTについては、いいね数よりもリツイート数の方が基本的に少ないことから、  
リツイートされる方がいいねされるよりも価値が高いと判断し、2倍の評価をしています。
  
  
# 実装した機能について
【作品情報の自動取得機能】  

- スクレイピング機能（BeautifulSoup使用）  
3つのサイトから情報をとり、保存できるように設定しています。  
スクレイピングは以下のコマンドで実行します。

   アニメの情報について  
   `python3 manage.py scraping --anime`

   ドラマの情報について  
   `python3 manage.py scraping --drama`

- TwetterAPIを利用してツイート情報の取得機能  
TwitterApiに対して、Timelineの情報を取得または更新するよう設定しています。  
過去にTwitterAPIから情報を取得し保存している場合は、更新をするように設定しています。  
以下のコマンドで情報を取得できます。  
本番環境では、このコマンドをcron等で定期実行することで、定期的に新しい情報を取得できるようにしています。

   `python3 manage.py aggregate_tweets -sn (TwitterID)`

【ランキング機能】
- Twetter情報を元に独自の評価数値を計算しランキングを作成しています。
- 各作品の詳細ページには、ポイントの評価推移グラフを作成しています。  
ツイートごとのPOINTを計算してグラフ化し、放送回ごとの反響を確認することができます。

【管理者機能（カスタムした部分について）】  
- Contentモデルを保存する際に、TwitterIDが入力されていれば、TwitterAPIへツイート情報を取得し、  
TwitterUserモデル・Tweetモデル・TweetCountモデルの作成or更新を行う機能  


# 開発環境
```
フレームワーク：Django
フロントエンド：Haml,SCSS
データベース：MySQL
インフラ：AWS(ELB, EC2, RDS, CloudFormation)
構成管理：Ansible
バージョン管理：Github
```


# 注意
＊Basic認証について  
本アプリはポートフォリオとして作成しているため、Basic認証を追加しております。ID、PASSについては以下の通りです。  
```
ID： Admin  
PASS： Zaq12wsx
```